<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <title>Document</title>
</head>
<body>
    <main class="w-50 mx-auto mt-4 shadow p-3 rounded">
        <form action="">
            <h1 class="text-info">Sign Up</h1>
            <div class="form-group">
                <label for="" class="small text-primary">Username</label>
                <input id="username" type="text" class="form-control" placeholder="Username">
            </div>
            <div class="form-group">
                <label for="" class="small text-primary">Email</label>
                <input id="email" type="email" class="form-control" placeholder="dev@gmail.uk">
            </div>
            <div class="form-group">
                <label for="" class="small text-primary">Password</label>
                <input id="password" type="text" class="form-control" placeholder="*****">
            </div>
            <div class="mt-3 text-center">
                <button onclick="signup(event)" class="btn btn-primary w-50">Sign up</button>
            </div>
            <p class="text-center">Don't have an account? <button id="toSignIn">Sign in</button></p>
        </form>
    </main>
</body>
</html>

<!-- <script type="module" src="./js/main.js"></script> -->
<script>
    const firebaseConfig = {
      apiKey: "AIzaSyDT7qrI47w_4DI_nh7D6_qoiwzIx7oxbaA",
      authDomain: "chat-app-ea79e.firebaseapp.com",
      projectId: "chat-app-ea79e",
      storageBucket: "chat-app-ea79e.appspot.com",
      messagingSenderId: "848614605219",
      appId: "1:848614605219:web:29dc991be386ed3e149a16"
    };
  
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
  </script>

<script>
    // let toSignIn = document.getElementById("toSignIn")

    document.getElementById("toSignIn").addEventListener("click", (event)=>{
        event.preventDefault()
        window.location.href = "signin.html"
    })
    let username = document.getElementById("username");
    let email = document.getElementById("email");
    let pass = document.getElementById("password");
    function signup(ev){
        ev.preventDefault();
        firebase.auth().createUserWithEmailAndPassword(email.value, pass.value)
        .then((userCredential) => {
            // Signed in 
            var user = userCredential.user;
            user.updateProfile({
                displayName: username.value,
            }).then(() => {
                alert("Signup Successful");
                window.location.href = "./signin.html"
            }).catch((error) => {
                console.log(error);
            });  
        })
        .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            console.log(errorMessage);
        });
    }
</script>